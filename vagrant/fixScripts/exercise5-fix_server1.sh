#!/bin/bash

# put ssh-private key into /home/vagrant/.ssh/id_rsa
echo "-----BEGIN RSA PRIVATE KEY-----
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
-----END RSA PRIVATE KEY-----
" >> /home/vagrant/.ssh/id_rsa
chmod 600 /home/vagrant/.ssh/id_rsa
chown -R vagrant:vagrant /home/vagrant/.ssh/id_rsa

# configuring ~/.ssh/config file
echo 'Host server2' >> /home/vagrant/.ssh/config
echo 'StrictHostKeyChecking no' >> /home/vagrant/.ssh/config
echo 'UserKnownHostsFile /dev/null' >> /home/vagrant/.ssh/config
chmod -R 640 /home/vagrant/.ssh/config
chown -R vagrant:vagrant /home/vagrant/.ssh/config

# copy public ssh-key of server2 into /home/vagrant/.ssh/authorized_keys 
echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCviyzAxIrQ+qRzv8FEohkL22hkfFGiRBHvdn1S1qbH5dleG0w828FeyI1LlyRrEEGoh7BEk4JQp5xLwfGTk+rWE6PNlyAmgRlucPemqT2HQSyC13x292Sz66oTdUPKr6790nI+GFj9O8awcIQ7W9WKK3UwpzDiI/YvJCJTN1YDMIaG8HnpwhNS3OPW2Kkl7ia9dwQk+WodMPSkCccQtcNVt4TZDP2JiajldTkNUfkMx0xtRTOxE0zNKd1SeOqoegy94V0CjrBuSsd2zqlCcHASp0iCgmG+dp2xnfY2sDn0KxZ2MbLW48bDph9xVizWhWu6X8F4JOuoff371DN9Cj/c90+EklBlGdF63+cL4B/ke2hfPNE9ZydcLsmuvdW2iKLg2RqRlJJvNrmCohsfP+8pEvtKtnSTfsoegO9axUyvh2NmYFUYvYsKpMV97qOuajPhzhF46dqG5JPhZjRBl2jjZHZhgy0zgNp/R3t7117Kw0a6MHlKsUDI3dSSKPPTzG9sYo8oYHLC96bujRWtmfqnBLUHyNgEd+b09uCecQ9oJXjeZnvEEEzJRjQkK6AFA9OOY4eW1optaWyWAwMq15gOL+mvgRn7gynHUhGHErbbvqT71hSkYPSEJZzVICVKYOaTo7RvjQVMAhuHsrJYzC2lbSz0824E19A8zpVxNN9Zow== testuser@example.com" >> /home/vagrant/.ssh/authorized_keys
chmod -R 640 /home/vagrant/.ssh/authorized_keys
chown -R vagrant:vagrant /home/vagrant/.ssh/authorized_keys
