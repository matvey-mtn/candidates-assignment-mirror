#!/bin/bash

# put ssh-private key into /home/vagrant/.ssh/id_rsa
echo "-----BEGIN RSA PRIVATE KEY-----
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
-----END RSA PRIVATE KEY-----
" >> /home/vagrant/.ssh/id_rsa
chmod 600 /home/vagrant/.ssh/id_rsa
chown -R vagrant:vagrant /home/vagrant/.ssh/id_rsa

# configuring ~/.ssh/config file
echo 'Host server1' >> /home/vagrant/.ssh/config
echo 'StrictHostKeyChecking no' >> /home/vagrant/.ssh/config
echo 'UserKnownHostsFile /dev/null' >> /home/vagrant/.ssh/config
chmod -R 640 /home/vagrant/.ssh/config
chown -R vagrant:vagrant /home/vagrant/.ssh/config

# copy public ssh-key of server1 into /home/vagrant/.ssh/authorized_keys 
echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDHQx3q7+1YkJ/A+NsNWnZW8dH2yRfwBA/4vOgn6Oda9zBOdgw1FZw9o91B+fB6TRYZwB6afYpC9thx8vDYyF+ABPeuS9c+SjREjzjqD+NCwVvI8FleNOoycCsgOhWEts12roJSAcksyPZXZO6ClAdRWjiVJNv+XHjzqyz5Fkqs9w65utt45uonx2Zt8f0LVv3SjkfsEoyhIIG3SbMEGaS4yGP8z7t0EWXFrcUBaJlv3f4Kmg2ovfBkTu0Xmt29pkZNWvkbWN9HpAIipbENFmgNG3YKS/NBTnAPHgHYPilLZt02G4LVroLQySIB2uJuFSEJXWsY3B+tapUf1WR6V8Pj8LTpBfYx/epqkdmBaiQzG3PSVFGxlOaFeb4xZawL6rwb13NRnllP8bqMJ8R83VqC9MQ6kDPa8MN8UWfOhh3ZwWVA3erVT7JFoL5HTWwdWyny8uOEyigz1ca+53w670x1jYY5HKoOYx8FOILsOixQTSELxUOZOuphLlCLgN5UCh1T2GU1f0g0hXip310WDvy/rj8jH2mnVV/MJ07WXOpUgiklDxrvZDHFG7WK17g4yJSNcPgbBv1athtN5PTR59tTvopnO6L77vcwm57Y/MLLPL36vOyj1CEIr0xIX2/GF3J32fvnmwg7Io7PHfhRUV9YGE4/Mnfk3YEwBBEKtCpqPw== testuser@example.com" >> /home/vagrant/.ssh/authorized_keys
chmod -R 640 /home/vagrant/.ssh/authorized_keys
chown -R vagrant:vagrant /home/vagrant/.ssh/authorized_keys
